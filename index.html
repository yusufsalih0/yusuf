<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Besa'nƒ±n Doƒüum G√ºn√º Kutlamasƒ±</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Pacifico&display=swap');

    /* Genel stil */
    * { box-sizing: border-box; }
    body {
      margin: 0; padding: 0;
      background: #000;
      color: #e6a8c4;
      font-family: 'Pacifico', cursive, Arial, sans-serif;
      overflow-x: hidden;
      text-align: center;
    }
    button {
      background: #d95ca0;
      border: none;
      border-radius: 12px;
      color: #000;
      font-size: 1.2rem;
      padding: 0.6rem 1.5rem;
      margin: 0.8rem;
      cursor: pointer;
      transition: background 0.3s;
      box-shadow: 0 0 8px #d95ca0;
    }
    button:hover { background: #e6a8c4; }

    /* U√ßan kalpler */
    .heart {
      position: fixed; bottom: -25px;
      font-size: 1.7rem; color: #d95ca0;
      animation: floatUp linear infinite;
      user-select: none;
    }
    @keyframes floatUp {
      to { transform: translateY(-270px) scale(0.5); opacity: 0; }
    }

    /* Sayfa gizleme */
    .hidden { display: none; }

    /* 1. sayfa */
    #page1 {
      min-height: 100vh;
      display: flex; flex-direction: column;
      justify-content: center; align-items: center;
      padding: 1rem;
    }
    #page1 h1 {
      font-size: 3.5rem; color: #f06292;
      text-shadow: 0 0 12px #f06292;
    }
    #page1 p { margin: 0.4rem 0; font-size: 1.4rem; }
    #page1 .small-poem {
      font-size: 1.2rem; font-style: italic;
      color: #f8bbd0; max-width: 360px; line-height: 1.3;
    }

    /* 2. sayfa */
    #page2 {
      padding: 1rem;
      max-width: 720px;
      margin: 0 auto;
    }
    #category-buttons {
      display: flex; flex-wrap: wrap;
      justify-content: center; gap: 12px;
    }
    #mini-game {
      background: #261c2c;
      padding: 1rem; border-radius: 12px;
      box-shadow: 0 0 12px #d95ca0;
      margin-top: 1rem;
      color: #e6a8c4;
    }
    #mini-game h3 { margin: 0; font-size: 1.5rem; }
    .choice-container {
      display: flex; flex-wrap: wrap;
      justify-content: space-around; gap: 1rem;
      margin-top: 1rem;
    }
    .choice-box {
      background: #e6a8c4; color: #000;
      padding: 0.8rem; border-radius: 8px;
      flex: 1 1 40%; min-width: 140px;
      cursor: pointer; font-weight: bold;
      box-shadow: 0 0 6px #e6a8c4;
      transition: background 0.3s;
    }
    .choice-box:hover { background: #d95ca0; color: #fff; }

    #round-info, #winner-message {
      margin-top: 0.8rem;
      font-size: 1.1rem;
    }
    #restart-btn { margin-top: 1rem; }

    /* YouTube oynatƒ±cƒ± */
    #yt-player {
      position: fixed; bottom: 12px; right: 12px;
      width: 300px; height: 169px;
      border-radius: 8px; overflow: hidden;
      box-shadow: 0 0 12px #d95ca0;
      background: #000; z-index: 1000;
    }
    #yt-player iframe { width:100%; height:100%; border:0; }

    /* Anƒ± defteri */
    #toggle-memory-btn { margin-top: 1.5rem; }
    #memory-section {
      background: #261c2c;
      padding: 1rem; border-radius: 12px;
      box-shadow: 0 0 12px #d95ca0;
      margin-top: 1rem; color: #e6a8c4;
    }
    #memory-section textarea {
      width: 100%; resize: vertical; min-height: 80px;
      border-radius: 8px; border: none;
      padding: 0.6rem; font-family: Arial, sans-serif;
    }
    #memory-section input { margin-top: 0.6rem; }
    #memories-list {
      margin-top: 0.8rem; max-height: 180px;
      overflow-y: auto; text-align: left;
    }
    .memory-item {
      background: #e6a8c4; color: #000;
      padding: 0.5rem 0.8rem; margin-bottom: 0.6rem;
      border-radius: 8px; position: relative;
      box-shadow: 0 0 8px #e6a8c4;
      font-family: Arial, sans-serif;
    }
    .memory-item img {
      max-width: 100%; border-radius: 6px;
      margin-top: 0.4rem;
    }
    .memory-delete-btn {
      position: absolute; top: 6px; right: 8px;
      background: #d95c7b; color: #fff;
      border: none; border-radius: 50%;
      width: 22px; height: 22px; line-height: 18px;
      cursor: pointer; font-weight: bold;
      opacity: 0.8; transition: opacity 0.2s;
    }
    .memory-delete-btn:hover { opacity: 1; }
  </style>
</head>
<body>

  <!-- U√ßan Kalpler -->
  <script>
    for (let i = 0; i < 15; i++) {
      const h = document.createElement('div');
      h.className = 'heart';
      h.textContent = '‚ù§Ô∏è';
      h.style.left = (i * 7 + 3) + '%';
      h.style.animationDuration = (4 + Math.random()*3) + 's';
      document.body.appendChild(h);
    }
  </script>

  <!-- 1. Sayfa -->
  <main id="page1">
    <h1>Doƒüum G√ºn√ºn Kutlu Olsun ü•≥</h1>
    <p>ƒ∞yi ki doƒüdun Besa.</p>
    <p class="small-poem">
      ‚ÄúBir g√ºl√º≈ü√ºn var, hayatƒ±ma bahar olur,<br>
      Her anƒ±n seninle anlam bulur, dostum olur.‚Äù
    </p>
    <button id="btn-to-page2">Devam Et</button>
  </main>

  <!-- 2. Sayfa -->
  <main id="page2" class="hidden">
    <h2>M√ºzik Turnuvasƒ± üé∂</h2>

    <!-- Kategori Se√ßimi -->
    <div id="category-buttons">
      <button class="category-btn" data-cat="besa">üíñ Besa'nƒ±n Favorileri</button>
      <button class="category-btn" data-cat="klasik">üéº Klasikler</button>
      <button class="category-btn" data-cat="yufus">üéß Yufus‚Äôun Sevdikleri</button>
    </div>

    <!-- Mini Oyun -->
    <div id="mini-game" class="hidden">
      <h3 id="game-title"></h3>
      <div id="round-info"></div>
      <div class="choice-container">
        <div id="choice1" class="choice-box"></div>
        <div id="choice2" class="choice-box"></div>
      </div>
      <div id="winner-message"></div>
      <button id="restart-btn" class="hidden">Yeniden Ba≈üla</button>
    </div>

    <!-- YouTube -->
    <div id="yt-player" class="hidden">
      <iframe id="yt-iframe" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>

    <!-- Anƒ± Defteri -->
    <button id="toggle-memory-btn">üìù Anƒ± Defteri A√ß/Kapa</button>
    <section id="memory-section" class="hidden">
      <h3>üìù Anƒ± Defteri</h3>
      <textarea id="memory-text" placeholder="Anƒ±nƒ± yaz..."></textarea>
      <input type="file" id="memory-photo" accept="image/*" />
      <button id="save-memory-btn">Kaydet</button>
      <div id="memories-list"></div>
    </section>

    <button id="btn-to-page1" style="margin-top:1.5rem;">Geri D√∂n</button>
  </main>

  <script>
    // Sayfa Ge√ßi≈üleri
    const p1 = document.getElementById('page1');
    const p2 = document.getElementById('page2');
    document.getElementById('btn-to-page2')
      .onclick = () => { p1.classList.add('hidden'); p2.classList.remove('hidden'); };
    document.getElementById('btn-to-page1')
      .onclick = () => { p2.classList.add('hidden'); p1.classList.remove('hidden'); resetGame(); };

    // ≈ûarkƒ± listeleri
    const bs = [
      {name:"madrigal - seni dert etmeler", id:"Z9wA_NweA5c"},
      {name:"son feci bisiklet - 80", id:"Km5ETLG9Nwo"},
      /* ... gerisini orijinal ID‚Äôlerle doldur ... */
    ];
    const ks = [ /* klasikler */ ];
    const ys = [ /* yufusun sevdikleri */ ];

    const lists = { besa: bs, klasik: ks, yufus: ys };
    let gameSongs = [], round=1, total=0;

    // Etkinle≈ütir
    document.querySelectorAll('.category-btn').forEach(b => {
      b.onclick = () => {
        const cat = b.getAttribute('data-cat');
        gameSongs = shuffle([...lists[cat]]);
        round = 1; total = gameSongs.length -1;
        document.getElementById('game-title').textContent = b.textContent;
        document.getElementById('round-info').textContent = `Tur ${round}/${total}`;
        document.getElementById('mini-game').classList.remove('hidden');
        document.getElementById('yt-player').classList.remove('hidden');
        showNext();
        playVid(gameSongs[0].id);
      }
    });

    // Shuffle
    function shuffle(a){
      for(let i=a.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
      }
      return a;
    }

    // Oyun Fonksiyonlarƒ±
    function showNext(){
      if(gameSongs.length===1){
        choice1.style.display=choice2.style.display='none';
        winner.textContent=`Favorin: ${gameSongs[0].name} üéâ`;
        restart.classList.remove('hidden');
        return;
      }
      choice1.style.display=choice2.style.display='block';
      choice1.textContent=gameSongs[0].name;
      choice2.textContent=gameSongs[1].name;
    }
    function choose(i){
      const next=[ gameSongs[i] ];
      for(let k=2;k<gameSongs.length;k++) next.push(gameSongs[k]);
      gameSongs=next; round++;
      document.getElementById('round-info').textContent=`Tur ${round}/${total}`;
      showNext();
      playVid(gameSongs[0].id);
    }
    const choice1=document.getElementById('choice1'),
          choice2=document.getElementById('choice2'),
          winner=document.getElementById('winner-message'),
          restart=document.getElementById('restart-btn');
    choice1.onclick=()=>choose(0);
    choice2.onclick=()=>choose(1);
    restart.onclick=()=>resetGame();

    function resetGame(){
      document.getElementById('mini-game').classList.add('hidden');
      document.getElementById('yt-player').classList.add('hidden');
      shuffle=[]; round=1; total=0; winner.textContent='';
    }

    // YouTube
    const ytFrame=document.getElementById('yt-iframe');
    function playVid(id){
      ytFrame.src=`https://www.youtube.com/embed/${id}?autoplay=1&rel=0`;
    }

    // Anƒ± Defteri
    document.getElementById('toggle-memory-btn')
      .onclick = ()=> document.getElementById('memory-section')
                        .classList.toggle('hidden');

    let memories=JSON.parse(localStorage.getItem('memories')||'[]');
    function renderMem(){
      const lst=document.getElementById('memories-list');
      lst.innerHTML='';
      memories.forEach((m,i)=>{
        const div=document.createElement('div');
        div.className='memory-item';
        div.innerHTML=`
          <button class="memory-delete-btn" data-i="${i}">√ó</button>
          <p>${m.text.replace(/\n/g,'<br>')}</p>
          ${m.photo?`<img src="${m.photo}">`:''}
        `;
        lst.appendChild(div);
      });
      document.querySelectorAll('.memory-delete-btn').forEach(btn=>
        btn.onclick=()=>{
          memories.splice(btn.dataset.i,1);
          localStorage.setItem('memories',JSON.stringify(memories));
          renderMem();
        }
      );
    }
    renderMem();
    document.getElementById('save-memory-btn').onclick=()=>{
      const txt=document.getElementById('memory-text').value.trim();
      if(!txt){ alert('L√ºtfen yazƒ± gir.'); return; }
      const file=document.getElementById('memory-photo').files[0];
      if(file){
        const r=new FileReader();
        r.onload=e=>{
          memories.push({text:txt,photo:e.target.result});
          localStorage.setItem('memories',JSON.stringify(memories));
          renderMem();
          document.getElementById('memory-text').value='';
        };
        r.readAsDataURL(file);
      } else {
        memories.push({text:txt,photo:null});
        localStorage.setItem('memories',JSON.stringify(memories));
        renderMem();
        document.getElementById('memory-text').value='';
      }
    };
  </script>
</body>
</html>
